{% extends "admin/base.html" %}

{% block title %}Incident Details - CareConnect Admin{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50">
    <!-- Header -->
    <div class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="py-6">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <a href="/admin/incidents" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-arrow-left text-xl"></i>
                        </a>
                        <div>
                            <h1 class="text-3xl font-bold text-gray-900">Minor Playground Accident</h1>
                            <p class="mt-2 text-gray-600">Incident report and follow-up information</p>
                        </div>
                    </div>
                    <div class="flex space-x-3">
                        <button class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            <i class="fas fa-edit mr-2"></i>Edit Report
                        </button>
                        <button class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
                            <i class="fas fa-check mr-2"></i>Mark Resolved
                        </button>
                        <button class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors">
                            <i class="fas fa-download mr-2"></i>Export Report
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <!-- Status Banner -->
        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
            <div class="flex items-center">
                <div class="flex-shrink-0">
                    <i class="fas fa-exclamation-triangle text-yellow-400 text-xl"></i>
                </div>
                <div class="ml-3">
                    <h3 class="text-sm font-medium text-yellow-800">Under Investigation</h3>
                    <div class="mt-2 text-sm text-yellow-700">
                        <p>This incident is currently being reviewed. Follow-up actions are in progress.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Main Information -->
            <div class="lg:col-span-2 space-y-6">
                <!-- Incident Overview -->
                <div class="bg-white rounded-lg shadow">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h3 class="text-lg font-medium text-gray-900">Incident Overview</h3>
                    </div>
                    <div class="p-6">
                        <div class="flex items-center mb-6">
                            <div class="h-16 w-16 rounded-full bg-red-100 flex items-center justify-center">
                                <i class="fas fa-exclamation-triangle text-red-600 text-2xl"></i>
                            </div>
                            <div class="ml-6">
                                <h2 class="text-2xl font-bold text-gray-900">Minor Playground Accident</h2>
                                <p class="text-gray-600">Child fell from playground equipment</p>
                                <p class="text-sm text-gray-500">Incident ID: INC-2024-023</p>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Incident Type</label>
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                    Physical Injury
                                </span>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Severity Level</label>
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                    Minor
                                </span>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Date & Time</label>
                                <p class="mt-1 text-sm text-gray-900">December 12, 2024 • 2:30 PM</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Location</label>
                                <p class="mt-1 text-sm text-gray-900">Outdoor Playground - Climbing Structure</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Weather Conditions</label>
                                <p class="mt-1 text-sm text-gray-900">Sunny, Dry (22°C)</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Reporting Staff</label>
                                <p class="mt-1 text-sm text-gray-900">Ms. Jennifer Adams</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Status</label>
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                    Under Investigation
                                </span>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Priority</label>
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                    Medium
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Child Information -->
                <div class="bg-white rounded-lg shadow">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h3 class="text-lg font-medium text-gray-900">Child Involved</h3>
                    </div>
                    <div class="p-6">
                        <div class="flex items-center mb-4">
                            <div class="h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center">
                                <i class="fas fa-child text-blue-600 text-xl"></i>
                            </div>
                            <div class="ml-4">
                                <h4 class="text-lg font-medium text-gray-900">Liam Chen</h4>
                                <p class="text-sm text-gray-600">Age 4 • Toddler Room A</p>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Student ID</label>
                                <p class="mt-1 text-sm text-gray-900">CHD-2024-025</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Primary Parent</label>
                                <p class="mt-1 text-sm text-gray-900">Lisa Chen</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Emergency Contact</label>
                                <p class="mt-1 text-sm text-gray-900">(416) 555-0187</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Medical Conditions</label>
                                <p class="mt-1 text-sm text-gray-900">None reported</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Incident Details -->
                <div class="bg-white rounded-lg shadow">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h3 class="text-lg font-medium text-gray-900">Incident Details</h3>
                    </div>
                    <div class="p-6">
                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Description of Incident</label>
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <p class="text-sm text-gray-900">
                                        Liam was playing on the climbing structure during outdoor playtime. He was attempting 
                                        to climb from the lower platform to the upper level when he lost his grip and fell 
                                        approximately 3 feet to the ground. He landed on his left side on the rubber matting 
                                        below the equipment. Staff member Ms. Jennifer Adams was supervising the playground 
                                        and immediately attended to Liam.
                                    </p>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Injuries Sustained</label>
                                <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                                    <ul class="text-sm text-red-800 space-y-1">
                                        <li>• Minor scrape on left elbow (approximately 1 inch)</li>
                                        <li>• Small bruise on left hip</li>
                                        <li>• No head injury observed</li>
                                        <li>• Child was conscious and alert throughout</li>
                                    </ul>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Immediate Actions Taken</label>
                                <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                                    <ul class="text-sm text-green-800 space-y-1">
                                        <li>• Child was immediately comforted and assessed for injuries</li>
                                        <li>• First aid applied to scrape on elbow (cleaned and bandaged)</li>
                                        <li>• Ice pack applied to bruised hip area</li>
                                        <li>• Parents contacted immediately (2:35 PM)</li>
                                        <li>• Child monitored for signs of concussion or other injuries</li>
                                        <li>• Incident documented and reported to supervisor</li>
                                    </ul>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Witnesses</label>
                                <div class="space-y-3">
                                    <div class="border border-gray-200 rounded-lg p-3">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900">Ms. Jennifer Adams</p>
                                                <p class="text-xs text-gray-600">Lead Teacher - Direct witness</p>
                                            </div>
                                            <span class="text-xs text-gray-500">Primary witness</span>
                                        </div>
                                    </div>
                                    <div class="border border-gray-200 rounded-lg p-3">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="text-sm font-medium text-gray-900">Ms. Maria Rodriguez</p>
                                                <p class="text-xs text-gray-600">Assistant Teacher - Nearby supervision</p>
                                            </div>
                                            <span class="text-xs text-gray-500">Secondary witness</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Follow-up Actions -->
                <div class="bg-white rounded-lg shadow">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h3 class="text-lg font-medium text-gray-900">Follow-up Actions & Timeline</h3>
                    </div>
                    <div class="p-6">
                        <div class="flow-root">
                            <ul class="-mb-8">
                                <li>
                                    <div class="relative pb-8">
                                        <span class="absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200"></span>
                                        <div class="relative flex space-x-3">
                                            <div>
                                                <span class="h-8 w-8 rounded-full bg-green-500 flex items-center justify-center ring-8 ring-white">
                                                    <i class="fas fa-check text-white text-sm"></i>
                                                </span>
                                            </div>
                                            <div class="min-w-0 flex-1 pt-1.5 flex justify-between space-x-4">
                                                <div>
                                                    <p class="text-sm text-gray-500">Parents contacted and informed</p>
                                                    <p class="text-xs text-gray-400">Lisa Chen arrived at 3:00 PM to assess child</p>
                                                </div>
                                                <div class="text-right text-sm whitespace-nowrap text-gray-500">
                                                    Dec 12, 2:35 PM
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="relative pb-8">
                                        <span class="absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200"></span>
                                        <div class="relative flex space-x-3">
                                            <div>
                                                <span class="h-8 w-8 rounded-full bg-green-500 flex items-center justify-center ring-8 ring-white">
                                                    <i class="fas fa-check text-white text-sm"></i>
                                                </span>
                                            </div>
                                            <div class="min-w-0 flex-1 pt-1.5 flex justify-between space-x-4">
                                                <div>
                                                    <p class="text-sm text-gray-500">Incident report completed and filed</p>
                                                    <p class="text-xs text-gray-400">Supervisor notified and documentation submitted</p>
                                                </div>
                                                <div class="text-right text-sm whitespace-nowrap text-gray-500">
                                                    Dec 12, 4:00 PM
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="relative pb-8">
                                        <span class="absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200"></span>
                                        <div class="relative flex space-x-3">
                                            <div>
                                                <span class="h-8 w-8 rounded-full bg-yellow-500 flex items-center justify-center ring-8 ring-white">
                                                    <i class="fas fa-clock text-white text-sm"></i>
                                                </span>
                                            </div>
                                            <div class="min-w-0 flex-1 pt-1.5 flex justify-between space-x-4">
                                                <div>
                                                    <p class="text-sm text-gray-500">Playground equipment inspection scheduled</p>
                                                    <p class="text-xs text-gray-400">Safety assessment to be conducted</p>
                                                </div>
                                                <div class="text-right text-sm whitespace-nowrap text-gray-500">
                                                    Dec 13, 9:00 AM
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <li>
                                    <div class="relative">
                                        <div class="relative flex space-x-3">
                                            <div>
                                                <span class="h-8 w-8 rounded-full bg-gray-400 flex items-center justify-center ring-8 ring-white">
                                                    <i class="fas fa-phone text-white text-sm"></i>
                                                </span>
                                            </div>
                                            <div class="min-w-0 flex-1 pt-1.5 flex justify-between space-x-4">
                                                <div>
                                                    <p class="text-sm text-gray-500">Follow-up call with parents</p>
                                                    <p class="text-xs text-gray-400">Check on child's recovery progress</p>
                                                </div>
                                                <div class="text-right text-sm whitespace-nowrap text-gray-500">
                                                    Dec 16, Pending
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="space-y-6">
                <!-- Incident Summary -->
                <div class="bg-white rounded-lg shadow">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h3 class="text-lg font-medium text-gray-900">Incident Summary</h3>
                    </div>
                    <div class="p-6 space-y-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-orange-600">Minor</div>
                            <div class="text-sm text-gray-600">Severity Level</div>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-gray-600">Time to Response</span>
                            <span class="text-sm font-medium text-gray-900">Immediate</span>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-gray-600">Medical Attention</span>
                            <span class="text-sm font-medium text-gray-900">First Aid</span>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-gray-600">Parent Notification</span>
                            <span class="text-sm font-medium text-gray-900">5 minutes</span>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-gray-600">Days Since Incident</span>
                            <span class="text-sm font-medium text-gray-900">3 days</span>
                        </div>
                    </div>
                </div>

                <!-- Contact Information -->
                <div class="bg-white rounded-lg shadow">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h3 class="text-lg font-medium text-gray-900">Emergency Contacts</h3>
                    </div>
                    <div class="p-6 space-y-4">
                        <div>
                            <h4 class="text-sm font-medium text-gray-900">Primary Parent</h4>
                            <p class="text-sm text-gray-600">Lisa Chen</p>
                            <p class="text-sm text-gray-600">(416) 555-0187</p>
                            <p class="text-sm text-gray-600">lisa.chen@email.com</p>
                        </div>
                        
                        <div>
                            <h4 class="text-sm font-medium text-gray-900">Secondary Parent</h4>
                            <p class="text-sm text-gray-600">David Chen</p>
                            <p class="text-sm text-gray-600">(416) 555-0186</p>
                            <p class="text-sm text-gray-600">david.chen@email.com</p>
                        </div>
                        
                        <div>
                            <h4 class="text-sm font-medium text-gray-900">Emergency Contact</h4>
                            <p class="text-sm text-gray-600">Grace Chen (Grandmother)</p>
                            <p class="text-sm text-gray-600">(416) 555-0185</p>
                        </div>
                    </div>
                </div>

                <!-- Related Documents -->
                <div class="bg-white rounded-lg shadow">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h3 class="text-lg font-medium text-gray-900">Related Documents</h3>
                    </div>
                    <div class="p-6 space-y-3">
                        <button class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md flex items-center">
                            <i class="fas fa-file-medical text-red-500 w-5 mr-3"></i>
                            Incident Report Form
                        </button>
                        <button class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md flex items-center">
                            <i class="fas fa-camera text-blue-500 w-5 mr-3"></i>
                            Injury Photos
                        </button>
                        <button class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md flex items-center">
                            <i class="fas fa-clipboard-check text-green-500 w-5 mr-3"></i>
                            First Aid Log
                        </button>
                        <button class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md flex items-center">
                            <i class="fas fa-phone text-purple-500 w-5 mr-3"></i>
                            Parent Communication
                        </button>
                        <button class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md flex items-center">
                            <i class="fas fa-tools text-orange-500 w-5 mr-3"></i>
                            Equipment Inspection
                        </button>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="bg-white rounded-lg shadow">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h3 class="text-lg font-medium text-gray-900">Quick Actions</h3>
                    </div>
                    <div class="p-6 space-y-3">
                        <button class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md flex items-center">
                            <i class="fas fa-phone text-blue-500 w-5 mr-3"></i>
                            Call Parents
                        </button>
                        <button class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md flex items-center">
                            <i class="fas fa-envelope text-green-500 w-5 mr-3"></i>
                            Send Update
                        </button>
                        <button class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md flex items-center">
                            <i class="fas fa-check text-purple-500 w-5 mr-3"></i>
                            Mark Resolved
                        </button>
                        <button class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md flex items-center">
                            <i class="fas fa-exclamation-triangle text-yellow-500 w-5 mr-3"></i>
                            Escalate Issue
                        </button>
                        <button class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md flex items-center">
                            <i class="fas fa-download text-indigo-500 w-5 mr-3"></i>
                            Export Report
                        </button>
                        <button class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md flex items-center">
                            <i class="fas fa-share text-gray-500 w-5 mr-3"></i>
                            Share with Team
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

